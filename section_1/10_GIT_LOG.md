## راهنمای جامع دستور `git log`

دستور `git log` یکی از مهم‌ترین ابزارهای Git برای مشاهده تاریخچه کامیت‌ها (commits) در یک مخزن است. با استفاده از این دستور، می‌توانید لیستی از تمام کامیت‌های انجام‌شده در مخزن را ببینید، اطلاعات مربوط به هر کامیت شامل شناسه‌ی کامیت (commit ID)، نویسنده، تاریخ و پیام کامیت را مرور کنید و حتی به نسخه‌های قبلی پروژه دسترسی داشته باشید. دستور `git log` به شما اجازه می‌دهد تاریخچه پروژه را به شکل بسیار منعطف و با جزئیات مختلف مشاهده کنید.

### دستور `git log` چه کاری انجام می‌دهد؟

دستور `git log` تاریخچه‌ی کامیت‌ها را نمایش می‌دهد و به شما کمک می‌کند کامیت‌های اخیر و قدیمی را مشاهده کنید. این دستور به صورت پیش‌فرض تمامی کامیت‌ها را از شاخه فعلی و به ترتیب زمان نمایش می‌دهد، به طوری که جدیدترین کامیت در بالای لیست قرار دارد.

#### سینتکس:

```bash
git log
```

این دستور لیستی از کامیت‌ها را به همراه شناسه، نویسنده، تاریخ و پیام کامیت نمایش می‌دهد.

#### نمونه خروجی:

```plaintext
commit b3a1e2f6f7a84c3a7c9e4b8f1d8f7a19f59e0fbd
Author: Your Name <your.email@example.com>
Date:   Wed Oct 27 12:00 2024 +0300

    Added documentation for new feature

commit 8c9e4b2d6c7e1a5f4b9f3e1b1a8c7e1a6d7f8e1a
Author: Your Name <your.email@example.com>
Date:   Tue Oct 26 09:30 2024 +0300

    Fixed bug in data processing function
```

این خروجی نشان می‌دهد که دو کامیت اخیر با شناسه‌های یکتا، نویسنده، تاریخ و پیام مربوطه در شاخه فعلی وجود دارند.

### گزینه‌های پرکاربرد با دستور `git log`

#### 1. **نمایش خلاصه با یک خط برای هر کامیت:**

برای مشاهده‌ی یک لیست فشرده از کامیت‌ها به همراه شناسه و پیام کوتاه هر کامیت، از گزینه `--oneline` استفاده کنید:

```bash
git log --oneline
```

نمونه خروجی:

```plaintext
b3a1e2f Added documentation for new feature
8c9e4b2 Fixed bug in data processing function
```

این گزینه برای بررسی سریع تاریخچه و شناسایی کامیت‌ها بسیار مفید است.

#### 2. **محدود کردن تعداد کامیت‌ها:**

برای مشاهده‌ی تعداد خاصی از کامیت‌های اخیر، می‌توانید از گزینه `-n` استفاده کنید، که `n` تعداد کامیت‌ها را مشخص می‌کند:

```bash
git log -5
```

این دستور فقط ۵ کامیت اخیر را نمایش می‌دهد.

#### 3. **نمایش تاریخچه با جزئیات بیشتر:**

اگر می‌خواهید علاوه بر پیام و شناسه کامیت، تغییرات فایل‌ها را نیز مشاهده کنید، می‌توانید از گزینه `-p` استفاده کنید. این گزینه تغییرات دقیق (diff) فایل‌ها را به همراه هر کامیت نشان می‌دهد:

```bash
git log -p
```

#### 4. **فیلتر کردن بر اساس نویسنده:**

برای مشاهده‌ی کامیت‌هایی که توسط نویسنده‌ی خاصی انجام شده‌اند، از گزینه `--author` استفاده کنید:

```bash
git log --author="Your Name"
```

#### 5. **نمایش تاریخ به شکل ساده و خوانا:**

برای مشاهده‌ی تاریخ به شکل ساده‌تر و خواناتر، می‌توانید از گزینه `--relative-date` استفاده کنید. این گزینه تاریخ‌ها را به شکل نسبی مانند "2 hours ago" نمایش می‌دهد:

```bash
git log --relative-date
```

#### 6. **فیلتر کردن بر اساس تاریخ:**

برای مشاهده‌ی کامیت‌هایی که در یک بازه زمانی خاص انجام شده‌اند، از گزینه `--since` و `--until` استفاده کنید:

```bash
git log --since="2 weeks ago"
git log --until="2024-10-25"
```

#### 7. **فیلتر کردن بر اساس نام فایل:**

اگر می‌خواهید فقط تاریخچه تغییرات یک فایل خاص را مشاهده کنید، می‌توانید نام فایل را به دستور اضافه کنید:

```bash
git log -- <filename>
```

#### 8. **گراف بصری ساده از شاخه‌ها:**

برای مشاهده‌ی تاریخچه به صورت گراف بصری از شاخه‌ها، از گزینه `--graph` استفاده کنید. این گزینه نمایشی گرافیکی از شاخه‌ها و ادغام‌ها (merges) ارائه می‌دهد:

```bash
git log --graph --oneline
```

نمونه خروجی:

```plaintext
* b3a1e2f Added documentation for new feature
| * 8c9e4b2 Fixed bug in data processing function
|/
* 4a9f8e1 Initial commit
```

### چه اتفاقی در پس‌زمینه دستور `git log` می‌افتد؟

وقتی دستور `git log` اجرا می‌شود، گیت از اطلاعات موجود در پوشه‌ی مخفی `.git/` برای نمایش تاریخچه کامیت‌ها استفاده می‌کند. این پروسه به صورت زیر است:

1. **خواندن تاریخچه کامیت‌ها:**

   - گیت اطلاعات کامیت‌ها را از پایگاه داده داخلی خود که در پوشه‌ی `.git/objects/` ذخیره شده است، استخراج می‌کند. هر کامیت به عنوان یک شیء جداگانه ذخیره می‌شود و به کامیت قبلی زنجیره‌ای از کامیت‌ها اشاره می‌کند.

2. **ساخت زنجیره کامیت‌ها (DAG):**

   - گیت یک گراف غیرمدور (DAG - Directed Acyclic Graph) از کامیت‌ها را ایجاد می‌کند. این گراف به شکل یک زنجیره است که هر کامیت به کامیت قبلی خود اشاره می‌کند و در نهایت یک نمای تاریخی از پروژه به دست می‌آید.

3. **خواندن و نمایش متادیتا:**

   - برای هر کامیت، گیت اطلاعاتی مانند شناسه‌ی کامیت (SHA-1 hash)، نویسنده، تاریخ و پیام کامیت را می‌خواند و به کاربر نمایش می‌دهد. این اطلاعات از فایل‌های مرتبط با هر کامیت که در پوشه‌ی `.git/` ذخیره شده‌اند، استخراج می‌شود.

4. **فیلتر کردن و فرمت خروجی:**
   - بسته به گزینه‌های استفاده‌شده (مانند `--oneline` یا `--author`)، گیت تاریخچه را بر اساس پارامترهای فیلترشده یا فرمت خاصی نمایش می‌دهد. برای مثال، اگر از گزینه `--oneline` استفاده شود، فقط شناسه کامیت و پیام کوتاه نمایش داده می‌شوند.

### نکات و ترفندها

#### 1. **بررسی سریع تاریخچه با `--oneline`:**

وقتی می‌خواهید به سرعت تاریخچه را مرور کنید و نیازی به جزئیات دقیق ندارید، استفاده از `--oneline` یک روش عالی برای مرور سریع لیست کامیت‌هاست.

#### 2. **یافتن کامیت‌های خاص با `--grep`:**

اگر به دنبال کامیت‌هایی با کلمه یا عبارت خاصی در پیام کامیت هستید، می‌توانید از گزینه `--grep` استفاده کنید:

```bash
git log --grep="bug fix"
```

این دستور فقط کامیت‌هایی که شامل عبارت "bug fix" در پیام هستند را نمایش می‌دهد.

#### 3. **مشاهده تاریخچه برای یک فایل خاص:**

اگر می‌خواهید تغییرات یک فایل خاص را در طول زمان مشاهده کنید، استفاده از `git log -- <filename>` به شما اجازه می‌دهد تاریخچه تغییرات آن فایل را مشاهده کنید. این کار به ویژه برای بررسی تغییرات فایل‌های حساس مانند فایل‌های تنظیمات یا اسناد بسیار مفید است.

#### 4. **استفاده از `--stat` برای نمایش خلاصه تغییرات فایل‌ها:**

با استفاده از گزینه `--stat`، می‌توانید یک خلاصه از تغییرات فایل‌ها در هر کامیت را به همراه تعداد خطوط اضافه یا حذف‌شده مشاهده کنید:

```bash
git log --stat
```

این گزینه به شما کمک می‌کند که به سرعت بفهمید چه فایل‌هایی تغییر کرده‌اند و حجم تغییرات چه مقدار بوده است.

#### 5. **مشاهده تاریخچه به صورت گرافیکی:**

برای مشاهده گرافیکی تاریخچه و شاخه‌های پروژه، ابزارهایی مانند `gitk` یا ابزارهای گرافیکی دیگری مانند GitKraken یا SourceTree می‌توانند تاریخچه را به صورت بصری نمایش دهند.

### نتیجه‌گیری

دستور `git log` ابزاری بسیار قدرتمند و انعطاف‌پذیر برای مشاهده تاریخچه‌ی کامیت‌ها و تغییرات در یک مخزن Git است. با استفاده از گزینه‌های مختلف، می‌توانید تاریخچه را به شکل‌های مختلف مرور کنید و اطلاعات مورد نیاز خود را به راحتی پیدا کنید. آگاهی از نحوه استفاده از `git log` و توانایی فیلتر کردن تاریخچه می‌تواند به شما کمک کند که پروژه‌های خود را بهتر مدیریت و تحلیل کنید.

در ادامه به بعد از یادگیری دستورات `add` و `commit` به برسی **HEAD** و مفهوم و آنچه در پس‌زمینه آن در گیت اتفاق می‌افتد می‌پردازیم.
